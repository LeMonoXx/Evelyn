<div class="stationPriceContainer" *ngIf="tradeData$ | async as tradeData; else CalcIsLoading">
    <div *ngIf="(itemIdentifier$ | async) as item" class="itemInfoContainer">
        <div class="splitLeftRight">
            <div class="itemInfo">
                <div *ngIf="(currentItemImageSourceObs | async) as imageSource">
                    <img class="foundItemImage" [src]="imageSource">
                </div>
                <div class="itemDetails">
                    <div class="itemInfoName" [title]="item.name"
                        (click)="copy(item.name)">{{ item.name }}</div>
                    <div class="itemInfoId">{{ item.id }}</div>
                    <div *ngIf="itemDetails$ | async as itemDetails" class="itemInfoId"> {{ itemDetails.packaged_volume }} mÂ³ </div>
                </div>
            </div>

            <div class="interactionButtons">
                <button class="mat-button" mat-button title="Add to shopping list"
                    (click)="addOrRemoveShoppingList(tradeData)">
                    <mat-icon [class.fillIcon]="IsOnShoppingList(item.id)">add_shopping_cart</mat-icon>
                </button>
                <button class="mat-button" mat-button title="Add to favorites"
                (click)="addOrRemoveFavorite(item)">
                    <mat-icon [class.fillIcon]="IsFavorite(item.id)">star</mat-icon>
                </button>
            </div>
        </div>
        <div class="stationRoute" >
            <div *ngIf="buyStation$ | async as buyStation" class="stationName textLeft">
                {{ buyStation.name }}
                
            </div>
            <div class="fromToStationIcon">
                <mat-icon [inline]="true">arrow_forward</mat-icon>
            </div>
            <div *ngIf="sellStation$ | async as sellStation" class="stationName textRight">
                {{ sellStation.name }}
               
            </div>
        </div>

        <div class="quickInfoBuySellContainerDiv">
            <div class="quickInfoBuySell textLeft">
                <label [class.multibleSellOrdersUsed]="tradeData.usedMarketEntries.length > 1"
                [title]="tradeData.usedMarketEntries.length > 1 ? 'Average price for multible orders': ''">
                    {{ tradeData.singleBuyPrice * -1 | currency }}
                </label>
                <span [matBadge]="tradeData.usedMarketEntries.length" 
                    [matBadgeHidden]="tradeData.usedMarketEntries.length <= 1" 
                    matBadgeOverlap="false"
                    matBadgePosition="after"></span>       
            </div>

            <label class="quickInfoBuySell textRight">{{ tradeData.singleSellPrice | currency }}</label>
        </div>

    </div>
    
    <div class="sellCostsContainer">
        <mat-divider></mat-divider>

        <div class="priceEntryDiv">
            <label class="titleLabel">Total Buy Cost</label>
            <label class="negativeNumber valueLabel">{{ tradeData.buyPriceX * -1 | currency }}</label>
        </div>

        <div class="priceEntryDiv">
            <label class="titleLabel">Brutto Sell Price</label>
            <label class="positivNumber valueLabel">{{ tradeData.sellPriceX | currency }}</label>
        </div>
        <div class="priceEntryDiv">
            <label class="titleLabel">Broker Fee</label>
            <label class="negativeNumber valueLabel">{{ tradeData.brokerFee * -1 | currency }}</label>
        </div>
        <div class="priceEntryDiv">
            <label class="titleLabel">Tax</label>
            <label class="negativeNumber valueLabel">{{ tradeData.saleTax * -1 | currency }}</label>
        </div>
        <div class="priceEntryDiv">
            <label class="titleLabel">Netto Sell Price</label>
            <label class="positivNumber valueLabel">{{ tradeData.nettoSalePrice | currency }}</label>
        </div>
        <mat-divider></mat-divider>
        <div class="priceEntryDiv">
            <label class="titleLabel">Shipping Cost</label>
            <label class="negativeNumber valueLabel">{{ tradeData.shippingCost * -1 | currency }}</label>
        </div>
        <div class="priceEntryDiv">
            <label class="titleLabel">Profit</label>
            <label class="valueLabel"
                [ngClass]="tradeData.profit <= 0 ? 'negativeProfit' : 'positivProfit'">
                {{ tradeData.profit | currency }}
            </label>       
        </div>
    </div>
</div>

<ng-template #CalcIsLoading>
    <div class="calcIsLoading">
        <mat-spinner></mat-spinner>
    </div>
 </ng-template>